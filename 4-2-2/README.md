Authors(s): Michael Nairn
Date: 06/07/2023

### 4-2-2 automation

Creates csv data for 4-2-2 (Participation rate in organised learning (one year before the official primary entry age), by sex) 

PLEASE NOTE - this automation produces data from 2018 onwards. Data prior to 2018 is already in the Jemalex csv sheet. 



Output includes the data in csv format, and an html QA report. Users should still look at the source data and check footnotes and information tabs for anything that needs to be manually changed in the csv output (e.g., if any figures are estimated) or caveats that need to be included in the metadata. In particular check the "data-guidance.txt" file associated with the download.


### 4-2-2 sourcing data instructions

1) Download the latest Education provision: children under 5 years of age data from: https://explore-education-statistics.service.gov.uk/find-statistics/education-provision-children-under-5. 
2) Click "Download all data (zip) 
3) From your downloads folder, move all excel file within the zip file into the 'Input' folder in 4-2-2.  If this doesn't exist, make it inside the 4-2-2 folder.

4) Please note that only the "1_early_years_provision_children_registered_2018_2023.csv" file is needed for the automation. This file gives the percentage of eligible children registered, as required for the indicator. The other csv files provide the percentage of registered children that have the relevant personal characteristics.





### 4-2-2 update instructions

1) In RStudio, go to File > Open Project, and open sdg_data_updates.Rproj. It may take a few minutes to load, please be patient. Update_indicator_main.R should open. If it doesn't go to File > Open File, and open it. 
4) If it exists, open the `config.R` file in 4-2-2 (you can do this in the 'Files' panel in RStudio (usually a tab in the bottom right panel). If not, save example_config.R as `config.R` in 4-2-2.
5) Check the configurations (e.g. filename) are correct, and if not correct them and save. For example, if you have had to save example_config.R as config.R, make sure 'Example_Input' and 'Example_Output' are changed to 'Input' and 'Output' and the file names are correct. 
6) Open `update_indicator_main.R` (from `sdg_data_updates.Rproj`) and set indicator as 4-2-2. Make sure test_run is set to FALSE (so that it sources the correct config file). 
7) Click 'Source' button to run the script (top right corner of the script panel).  
8) Outputs will be saved in the Output folder in 4-2-2 (which the script will create if it doesn't already exist).  
9) An html file will also be created in the Outputs folder. This contains some basic checks and relevant information for the person who will be QAing the update. **Please check this file before copying to the csv.** 
10) Data prior to 2018 is not generated by this automation. Therefore, ensure this data in the csv sheet of the indicator file is not overwritten when adding the automation generated csv output. 


### 4-2-2 Troubleshooting

It is likely that the next release (summer 2024) will cover 2019-2024.
Therefore, the automation will only produces data from 2019 onwards. 
Ensure that data prior to 2019, that is already in the csv sheet of the indicator file, is not overwritten when adding the automation generated csv output. 


